buildscript {
	ext.kotlin_version = '1.0.6'

	repositories {
		mavenCentral()
		mavenLocal()
		jcenter()
	}
	dependencies {
		classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
	}
}

allprojects {
	group 'io.gitlab.arturbosch'
	version '0.1.0'

	repositories {
		mavenLocal()
		mavenCentral()
		jcenter()
	}

	apply plugin: 'kotlin'
	apply plugin: 'java'
	apply plugin: 'idea'

	if (project.name.endsWith("parser")) {
		apply plugin: 'antlr'
	}

	configurations {
		kotlin
		kotlinTest
	}

	dependencies {
		kotlin "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
		kotlin "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"
		kotlinTest "org.jetbrains.kotlin:kotlin-test:$kotlin_version"
		kotlinTest "org.jetbrains.kotlin:kotlin-test-junit:$kotlin_version"
		kotlinTest 'junit:junit:4.12'
	}
}

configurations {
	compile.extendsFrom kotlin
	testCompile.extendsFrom kotlinTest
}

tasks.findByName('build').mustRunAfter ':grovlin-parser:generateGrammarSource'